.container
  .page-header
    %h1
      Профили

  .content-block
    .index-search__container
      %span.index-search__icon
        %i.fa.fa-search
      %input.index-search__input{name: 'search', data: {remote: true, url: profiles_path}, placeholder: 'Type to search', value: params[:search]}

    %table.table.profiles__table
      %thead
        %th
        %th #
        %th= t 'activerecord.attributes.profiles.name'
        %th= t 'activerecord.attributes.profiles.country'
        %th
        %th
        %th
      %tbody
        = render @profiles

  .profiles__pagination.text-center.top-buffer
    = will_paginate(@profiles, renderer: BootstrapPagination::Rails)

- content_for :page_js do
  :javascript
    (function() {
      var elem = document.querySelector('input[name="search"]');
      var timer_id = undefined;
      elem.addEventListener('input', function() {
        if (timer_id !== undefined) clearTimeout(timer_id);

        timer_id = setTimeout(function() {
          $.rails.handleRemote($(elem));
          timer_id = undefined;
        }, 200);
      });
    })();
